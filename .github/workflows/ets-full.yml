name: Trigger full CI chain (Phase 1 → Phase 2 → Backtest → Smoke)

on:
  push:
    branches: [ets_update_3]
  workflow_dispatch:

jobs:
  env-setup:
    name: Phase 1 – Env Setup
    uses: ./.github/workflows/ets-env-setup.yml

  provider-validate:
    name: Phase 2 – Provider Validation
    needs: env-setup
    uses: ./.github/workflows/ets-provider-validate.yml

  backtest:
    name: Phase 3 – Backtest
    needs: provider-validate
    uses: ./.github/workflows/ets-backtest.yml

  smoke:
    name: Phase 4 – Smoke CLI
    needs: backtest
    uses: ./.github/workflows/ets-smoke-cli.yml
